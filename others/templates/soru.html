<!DOCTYPE html>
<html lang="tr">
<head>
    <title>Sınav Soruları</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- iOS Smart App Banner -->
    <meta name="apple-itunes-app" content="app-id=6661020295, app-argument=soru/{{question_code}}">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at center, #444137 0%, #000000 70%, #010101 100%);
            color: #FDC712;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 50% 50%, #FDC712 0%, rgba(254, 197, 16, 0) 30%);
            opacity: 0.15;
            pointer-events: none;
            animation: pulse 6s ease-in-out infinite alternate;
        }
        
        body::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(253, 199, 18, 0.1) 0%, rgba(0, 0, 0, 0) 50%);
            pointer-events: none;
        }
        
        .container {
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(253, 199, 18, 0.2);
            padding: 40px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            position: relative;
            z-index: 10;
            animation: float 4s ease-in-out infinite;
        }
        
        .logo {
            width: 120px;
            height: 140px;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 10px rgba(254, 197, 16, 0.3));
        }
        
        h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #FDC712;
        }
        
        p {
            margin-bottom: 20px;
            color: #f8f9fa;
            font-size: 16px;
        }
        
        .app-links {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
        }
        
        .app-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px 20px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .app-store {
            background-color: #007AFF;
            color: white;
        }
        
        .app-store:hover {
            background-color: #0069d9;
            box-shadow: 0 0 15px rgba(0, 122, 255, 0.5);
        }
        
        .play-store {
            background-color: #34A853;
            color: white;
        }
        
        .play-store:hover {
            background-color: #2d9248;
            box-shadow: 0 0 15px rgba(52, 168, 83, 0.5);
        }
        
        .store-icon {
            margin-right: 10px;
            width: 24px;
            height: 24px;
        }
        
        .loading {
            display: block;
            margin: 20px auto;
            width: 50px;
            height: 50px;
            border: 5px solid rgba(253, 199, 18, 0.2);
            border-radius: 50%;
            border-top-color: #FDC712;
            animation: spin 1s linear infinite;
        }
        
        .glow-line {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg,
                rgba(254, 197, 16, 0) 0%,
                rgba(254, 197, 16, 0.7) 50%,
                rgba(254, 197, 16, 0) 100%);
            z-index: 5;
        }
        
        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }
        
        @keyframes pulse {
            0% { opacity: 0.1; }
            50% { opacity: 0.2; }
            100% { opacity: 0.15; }
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
    </style>
    
    <script>
        function detectAndRedirect() {
            const questionId = "{{question_id}}";
            const appScheme = "sinavsorulari://soru/" + questionId;
            const appStoreUrl = "https://apps.apple.com/tr/app/s%C4%B1nav-sorular%C4%B1-merkezi/id6661020295?l=tr";
            const playStoreUrl = "https://play.google.com/store/apps/details?id=com.sinavsorularimerkezi.sinavsorularimerkeziapps";
            
            // Detect if iOS
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            
            // Show appropriate button more prominently
            if (isIOS) {
                document.getElementById('apple-button').classList.add('primary-button');
            } else {
                document.getElementById('google-button').classList.add('primary-button');
            }
            
            // Try to open the app first
            setTimeout(function() {
                // If we're still here after timeout, app isn't installed
                if (document.hidden) return; // User left to the app
                
                // Hide loading, show store links
                document.getElementById('loading').style.display = 'none';
                document.getElementById('redirect-text').style.display = 'none';
                document.getElementById('store-text').style.display = 'block';
                document.getElementById('app-links').style.display = 'flex';
                
                // Redirect to appropriate store
                if (isIOS) {
                    window.location = appStoreUrl;
                } else {
                    window.location = playStoreUrl;
                }
            }, 2500);
            
            // Try to open the app
            window.location = appScheme;
        }
    </script>
</head>
<body onload="detectAndRedirect()">
    <div class="container">
        <img src="https://storage.sinavsorularimerkezi.com/static/new-logo.png" alt="Sınav Soruları" class="logo">
        <h1>Sınav Soruları</h1>
        
        <p id="redirect-text">Uygulama açılıyor, lütfen bekleyiniz...</p>
        <p id="store-text" style="display: none;">Uygulama yüklü değil gibi görünüyor. Hemen indirmek için:</p>
        
        <div class="loading" id="loading"></div>
        
        <div class="app-links" id="app-links" style="display: none;">
            <a href="https://apps.apple.com/tr/app/s%C4%B1nav-sorular%C4%B1-merkezi/id6661020295?l=tr" class="app-button app-store" id="apple-button">
                <svg class="store-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white">
                    <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z" />
                </svg>
                App Store'dan İndir
            </a>
            <a href="https://play.google.com/store/apps/details?id=com.sinavsorularimerkezi.sinavsorularimerkeziapps" class="app-button play-store" id="google-button">
                <svg class="store-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white">
                    <path d="M3,20.5V3.5C3,2.91 3.34,2.39 3.84,2.15L13.69,12L3.84,21.85C3.34,21.6 3,21.09 3,20.5M16.81,15.12L6.05,21.34L14.54,12.85L16.81,15.12M20.16,10.81C20.5,11.08 20.75,11.5 20.75,12C20.75,12.5 20.53,12.9 20.18,13.18L17.89,14.5L15.39,12L17.89,9.5L20.16,10.81M6.05,2.66L16.81,8.88L14.54,11.15L6.05,2.66Z" />
                </svg>
                Google Play'den İndir
            </a>
        </div>
    </div>
    <div class="glow-line"></div>
</body>
</html>